#!/usr/bin/env nu

echo 'wrong'
# let image = swww query | head -1 | awk -F 'image: ' '{print $2}'
let image = (swww query | str replace "image: " "\nimage: " | lines | last | parse "image: {image}" | get image)
# let color_scheme = gsettings get org.gnome.desktop.interface color-scheme | rg -o dark
let is_dark = (gsettings get org.gnome.desktop.interface color-scheme | str contains "dark")

print {
    wallpaper: $image
    color_scheme: $is_dark
}
# if is_dark' {
#   matugen image $image --mode light
#   gsettings set org.gnome.desktop.interface color-scheme prefer-light
#   gsettings set org.gnome.desktop.interface gtk-theme adw-gtk3
#   gsettings set org.gnome.desktop.interface icon-theme Papirus-Light
#   gsettings set org.gnome.desktop.interface cursor-theme Bibata-Modern-Classic
#   swaync-client --reload-css
#   hyprctl setcursor Bibata-Modern-Classic 24 | ignore
# } else {
#   matugen image $image  --mode dark
#   gsettings set org.gnome.desktop.interface color-scheme prefer-dark
#   gsettings set org.gnome.desktop.interface gtk-theme adw-gtk3-dark
#   gsettings set org.gnome.desktop.interface icon-theme Papirus-Dark
#   gsettings set org.gnome.desktop.interface cursor-theme Bibata-Modern-Ice
#   swaync-client --reload-css
#   hyprctl setcursor Bibata-Modern-Ice 24 | ignore
#   }

